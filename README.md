# Third-Party Bots Custom Endpoint Reference Service

This repository showcases the Third Party Bots Custom Endpoint API.
It also represents the single point of truth for the API specification.

## API Specification

The OpenAPI specification can be found under `/src/docs/`
x-middlewares fields are not considered part of the specification and can be ignored.

The specification describes a REST API that can support different versions of multiple bots.
The URL for a bot instance looks like the following example

{BaseUrl}/v1/bots/20fbb272-d4f7-4111-9fa9-e7339c7f99cc/environments/draft/

**Note** Our connector current version for custom endpoint is `v1` thus `v1` is expected to be part of the URL of API.

### Api Versions

Api versions as part of the URL are following the schema "v{x}" without any leading zeros.
For the time being only v1 has been defined and needs to be supported.

### Authentication

Third-Party Bots will authenticate its requests to the Custom Endpoint API by sending a signed JWT generated using [Private Conversational Cloud Applications](https://developers.liveperson.com/conversational-cloud-applications-what-is-a-conversational-cloud-application.html).

### Bots

A bot is identified by its uuid or a similar alphanumeric identifier.
A service implementation can restrict access to bots bases on the accoundId provided as the 'aud' field on the authentication WebToken

### Environments

Every bot can have multiple versions with different conversational flows and intents.
To address this the API needs to provide at least one standard environment named 'draft' for each bot.
Further environments can be provided as needed.
A bot environment will report the currently deployed bot version and its state.
A bot environment should report it's state as 'online' or otherwise the bot connection test will fail in Third Party Bots.
A bot environment should report a Semantic Version that describes what version of the bot (conversational flow, intents, etc)
is deployed on this environment

### Conversations

Conversation will be created for a specific bot on an environment and are addressed by the LP conversation id.
Additional context like sdes and conversation details are provided on the creation of the conversation.

### Events

An Event describes content send by a participant on a conversation (only the customer at this point)
or events generated by the conversation itself (started/ended/(transferred))

### Bot Responses

A Bot response itself does not have its own resource.
It is expected to be sent by the API on the response body at the creation of a new event resource.
At the moment getting historic data on the conversation or any details on the conversation are not considered part
of the specification and might only be optionally implemented by services.
